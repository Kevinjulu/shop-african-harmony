{"version":3,"file":"OnSale-DPZowOdm.js","sources":["../../src/pages/OnSale.tsx"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport { useCurrency } from \"@/hooks/useCurrency\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nconst OnSale = () => {\r\n  const { formatPrice } = useCurrency();\r\n\r\n  const { data: products, isLoading } = useQuery({\r\n    queryKey: [\"on-sale\"],\r\n    queryFn: async () => {\r\n      // In a real app, this would filter by products with active discounts\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\"*\")\r\n        .limit(20);\r\n      \r\n      if (error) throw error;\r\n      return data;\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <h1 className=\"text-2xl font-bold mb-6\">On Sale</h1>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n          {[...Array(8)].map((_, i) => (\r\n            <Card key={i}>\r\n              <CardContent className=\"p-4\">\r\n                <Skeleton className=\"h-48 w-full mb-4\" />\r\n                <Skeleton className=\"h-4 w-2/3 mb-2\" />\r\n                <Skeleton className=\"h-4 w-1/3\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">On Sale</h1>\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        {products?.map((product) => (\r\n          <Link key={product.id} to={`/product/${product.id}`}>\r\n            <Card className=\"hover:shadow-lg transition-shadow\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"aspect-square relative mb-4\">\r\n                  <img\r\n                    src={product.image_url || \"/placeholder.svg\"}\r\n                    alt={product.name}\r\n                    className=\"w-full h-full object-cover rounded-md\"\r\n                  />\r\n                  <Badge className=\"absolute top-2 right-2 bg-red-500\">\r\n                    Sale\r\n                  </Badge>\r\n                </div>\r\n                <h3 className=\"font-medium text-gray-900 mb-2\">{product.name}</h3>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <p className=\"text-primary font-bold\">{formatPrice(product.price * 0.8)}</p>\r\n                  <p className=\"text-gray-500 line-through text-sm\">{formatPrice(product.price)}</p>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OnSale;"],"names":["OnSale","formatPrice","useCurrency","products","isLoading","useQuery","data","error","supabase","jsxs","jsx","_","i","Card","CardContent","Skeleton","product","Link","Badge"],"mappings":"8MAQA,MAAMA,EAAS,IAAM,CACb,KAAA,CAAE,YAAAC,GAAgBC,IAElB,CAAE,KAAMC,EAAU,UAAAC,CAAA,EAAcC,EAAS,CAC7C,SAAU,CAAC,SAAS,EACpB,QAAS,SAAY,CAEnB,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAU,MAAMC,EAC3B,KAAK,UAAU,EACf,OAAO,GAAG,EACV,MAAM,EAAE,EAEX,GAAID,EAAa,MAAAA,EACV,OAAAD,CACT,CAAA,CACD,EAED,OAAIF,EAEAK,EAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,0BAA0B,SAAO,UAAA,QAC9C,MAAI,CAAA,UAAU,wCACZ,SAAC,CAAA,GAAG,MAAM,CAAC,CAAC,EAAE,IAAI,CAACC,EAAGC,IACrBF,EAAAA,IAACG,GACC,SAACJ,OAAAK,EAAA,CAAY,UAAU,MACrB,SAAA,CAACJ,EAAAA,IAAAK,EAAA,CAAS,UAAU,kBAAmB,CAAA,EACvCL,EAAAA,IAACK,EAAS,CAAA,UAAU,gBAAiB,CAAA,EACrCL,EAAAA,IAACK,EAAS,CAAA,UAAU,WAAY,CAAA,CAClC,CAAA,CAAA,CAAA,EALSH,CAMX,CACD,EACH,CACF,CAAA,CAAA,EAKFH,EAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,0BAA0B,SAAO,UAAA,EAC/CA,EAAAA,IAAC,OAAI,UAAU,wCACZ,0BAAU,IAAKM,GACdN,EAAA,IAACO,EAAsB,CAAA,GAAI,YAAYD,EAAQ,EAAE,GAC/C,SAACN,EAAAA,IAAAG,EAAA,CAAK,UAAU,oCACd,SAAAJ,EAAA,KAACK,EAAY,CAAA,UAAU,MACrB,SAAA,CAACL,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAC,EAAA,IAAC,MAAA,CACC,IAAKM,EAAQ,WAAa,mBAC1B,IAAKA,EAAQ,KACb,UAAU,uCAAA,CACZ,EACCN,EAAA,IAAAQ,EAAA,CAAM,UAAU,oCAAoC,SAErD,OAAA,CAAA,EACF,EACCR,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAkC,WAAQ,KAAK,EAC7DD,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,KAAE,UAAU,yBAA0B,WAAYM,EAAQ,MAAQ,EAAG,EAAE,QACvE,IAAE,CAAA,UAAU,qCAAsC,SAAYf,EAAAe,EAAQ,KAAK,EAAE,CAAA,EAChF,CAAA,CACF,CAAA,CACF,CAAA,CAAA,EAnBSA,EAAQ,EAoBnB,EAEJ,CAAA,CACF,CAAA,CAAA,CAEJ"}