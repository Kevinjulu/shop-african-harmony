{"version":3,"file":"Wishlist-CtD3vVoR.js","sources":["../../node_modules/lucide-react/dist/esm/icons/circle-alert.js","../../src/pages/Wishlist.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleAlert = createLucideIcon(\"CircleAlert\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","import { useState, useEffect } from \"react\";\r\nimport { Heart, Trash2, ShoppingCart, AlertCircle } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useCart } from \"@/contexts/CartContext\";\r\nimport { useCurrency } from \"@/hooks/useCurrency\";\r\nimport { toast } from \"sonner\";\r\nimport { Product, ProductStatus } from \"@/types/product\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useAuth } from \"@/components/AuthProvider\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nconst Wishlist = () => {\r\n  const [wishlistItems, setWishlistItems] = useState<Product[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const { addToCart } = useCart();\r\n  const { formatPrice } = useCurrency();\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    fetchWishlistItems();\r\n  }, [user]);\r\n\r\n  const fetchWishlistItems = async () => {\r\n    if (!user) {\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data: wishlistData, error: wishlistError } = await supabase\r\n        .from('wishlists')\r\n        .select('product_id')\r\n        .eq('user_id', user.id);\r\n\r\n      if (wishlistError) throw wishlistError;\r\n\r\n      if (wishlistData && wishlistData.length > 0) {\r\n        const productIds = wishlistData.map(item => item.product_id);\r\n        \r\n        const { data: products, error: productsError } = await supabase\r\n          .from('products')\r\n          .select('*')\r\n          .in('id', productIds);\r\n\r\n        if (productsError) throw productsError;\r\n        \r\n        // Transform the data to match the Product type\r\n        const transformedProducts: Product[] = (products || []).map(product => ({\r\n          ...product,\r\n          status: product.status as ProductStatus, // Type assertion since we know the values are valid\r\n          images: product.image_url ? [{ url: product.image_url, alt: product.name }] : undefined\r\n        }));\r\n        \r\n        setWishlistItems(transformedProducts);\r\n      } else {\r\n        setWishlistItems([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching wishlist:', error);\r\n      toast.error(\"Failed to load wishlist items\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const removeFromWishlist = async (productId: string) => {\r\n    if (!user) return;\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('wishlists')\r\n        .delete()\r\n        .eq('user_id', user.id)\r\n        .eq('product_id', productId);\r\n\r\n      if (error) throw error;\r\n\r\n      setWishlistItems(items => items.filter(item => item.id !== productId));\r\n      toast.success(\"Item removed from wishlist\");\r\n    } catch (error) {\r\n      console.error('Error removing from wishlist:', error);\r\n      toast.error(\"Failed to remove item from wishlist\");\r\n    }\r\n  };\r\n\r\n  const moveToCart = (product: Product) => {\r\n    addToCart(product, 1);\r\n    removeFromWishlist(product.id);\r\n    toast.success(\"Item moved to cart\");\r\n  };\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"text-center py-12\">\r\n          <AlertCircle className=\"w-16 h-16 mx-auto text-orange-400 mb-4\" />\r\n          <h2 className=\"text-2xl font-medium text-gray-600 mb-4\">Please sign in to view your wishlist</h2>\r\n          <p className=\"text-gray-500 mb-6\">Create an account or sign in to save your favorite items</p>\r\n          <Link to=\"/auth\">\r\n            <Button className=\"bg-orange-400 hover:bg-orange-500\">Sign In / Register</Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <h1 className=\"text-3xl font-bold mb-8\">My Wishlist</h1>\r\n        <div className=\"grid gap-6\">\r\n          {[1, 2, 3].map((i) => (\r\n            <div key={i} className=\"flex gap-4 border rounded-lg p-4\">\r\n              <Skeleton className=\"w-24 h-24 rounded-md\" />\r\n              <div className=\"flex-grow\">\r\n                <Skeleton className=\"h-6 w-3/4 mb-2\" />\r\n                <Skeleton className=\"h-4 w-1/4 mb-4\" />\r\n                <div className=\"flex gap-2\">\r\n                  <Skeleton className=\"h-10 w-32\" />\r\n                  <Skeleton className=\"h-10 w-10\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (wishlistItems.length === 0) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"text-center py-12\">\r\n          <Heart className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n          <h2 className=\"text-2xl font-medium text-gray-600 mb-4\">Your wishlist is empty</h2>\r\n          <p className=\"text-gray-500 mb-6\">Browse our products and add your favorites to the wishlist</p>\r\n          <Link to=\"/products\">\r\n            <Button className=\"bg-orange-400 hover:bg-orange-500\">Browse Products</Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h1 className=\"text-3xl font-bold mb-8\">My Wishlist</h1>\r\n      <div className=\"grid gap-6\">\r\n        {wishlistItems.map((item) => (\r\n          <div key={item.id} className=\"flex flex-col sm:flex-row gap-4 border rounded-lg p-4 hover:shadow-md transition-shadow\">\r\n            <Link to={`/product/${item.id}`} className=\"sm:w-24\">\r\n              <img\r\n                src={item.image_url || '/placeholder.svg'}\r\n                alt={item.name}\r\n                className=\"w-full sm:w-24 h-24 object-cover rounded-md\"\r\n              />\r\n            </Link>\r\n            <div className=\"flex-grow\">\r\n              <Link to={`/product/${item.id}`}>\r\n                <h3 className=\"font-medium text-lg hover:text-orange-400 transition-colors\">\r\n                  {item.name}\r\n                </h3>\r\n              </Link>\r\n              <p className=\"text-orange-400 font-semibold mt-1\">{formatPrice(item.price)}</p>\r\n              {item.stock > 0 ? (\r\n                <p className=\"text-green-600 text-sm mt-1\">In Stock</p>\r\n              ) : (\r\n                <p className=\"text-red-600 text-sm mt-1\">Out of Stock</p>\r\n              )}\r\n              <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                  onClick={() => moveToCart(item)}\r\n                  disabled={item.stock === 0}\r\n                  className=\"flex items-center gap-2 border-orange-400 text-orange-400 hover:bg-orange-50\"\r\n                >\r\n                  <ShoppingCart className=\"w-4 h-4\" />\r\n                  Move to Cart\r\n                </Button>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => removeFromWishlist(item.id)}\r\n                  className=\"text-red-500 hover:text-red-600 hover:bg-red-50\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Wishlist;"],"names":["CircleAlert","createLucideIcon","Wishlist","wishlistItems","setWishlistItems","useState","isLoading","setIsLoading","addToCart","useCart","formatPrice","useCurrency","user","useAuth","useEffect","fetchWishlistItems","wishlistData","wishlistError","supabase","productIds","item","products","productsError","transformedProducts","product","error","toast","removeFromWishlist","productId","items","moveToCart","jsxs","jsx","i","Skeleton","Heart","Link","Button","ShoppingCart","Trash2","AlertCircle"],"mappings":"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","x_google_ignoreList":[0]}