{"version":3,"file":"ProductDetails-CPNydXOk.js","sources":["../../node_modules/lucide-react/dist/esm/icons/share-2.js","../../node_modules/lucide-react/dist/esm/icons/zoom-in.js","../../src/components/product-details/ProductImageSkeleton.tsx","../../src/components/product-details/ProductImages.tsx","../../src/utils/currency.ts","../../src/components/product-details/QuantitySelector.tsx","../../src/components/product-details/ProductInfo.tsx","../../src/components/product-details/SimilarProducts.tsx","../../src/components/reviews/ReviewForm.tsx","../../node_modules/date-fns/compareAsc.mjs","../../node_modules/date-fns/constructNow.mjs","../../node_modules/date-fns/_lib/getRoundingMethod.mjs","../../node_modules/date-fns/differenceInMilliseconds.mjs","../../node_modules/date-fns/endOfDay.mjs","../../node_modules/date-fns/isLastDayOfMonth.mjs","../../node_modules/date-fns/differenceInMonths.mjs","../../node_modules/date-fns/differenceInSeconds.mjs","../../node_modules/date-fns/formatDistance.mjs","../../node_modules/date-fns/formatDistanceToNow.mjs","../../src/components/reviews/ReviewList.tsx","../../src/components/reviews/ProductReviews.tsx","../../src/pages/ProductDetails.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Share2 = createLucideIcon(\"Share2\", [\n  [\"circle\", { cx: \"18\", cy: \"5\", r: \"3\", key: \"gq8acd\" }],\n  [\"circle\", { cx: \"6\", cy: \"12\", r: \"3\", key: \"w7nqdw\" }],\n  [\"circle\", { cx: \"18\", cy: \"19\", r: \"3\", key: \"1xt0gg\" }],\n  [\"line\", { x1: \"8.59\", x2: \"15.42\", y1: \"13.51\", y2: \"17.49\", key: \"47mynk\" }],\n  [\"line\", { x1: \"15.41\", x2: \"8.59\", y1: \"6.51\", y2: \"10.49\", key: \"1n3mei\" }]\n]);\n\nexport { Share2 as default };\n//# sourceMappingURL=share-2.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ZoomIn = createLucideIcon(\"ZoomIn\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"line\", { x1: \"21\", x2: \"16.65\", y1: \"21\", y2: \"16.65\", key: \"13gj7c\" }],\n  [\"line\", { x1: \"11\", x2: \"11\", y1: \"8\", y2: \"14\", key: \"1vmskp\" }],\n  [\"line\", { x1: \"8\", x2: \"14\", y1: \"11\", y2: \"11\", key: \"durymu\" }]\n]);\n\nexport { ZoomIn as default };\n//# sourceMappingURL=zoom-in.js.map\n","import { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nexport const ProductImageSkeleton = () => {\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <Skeleton className=\"aspect-square w-full rounded-lg\" />\r\n      <div className=\"grid grid-cols-4 gap-2\">\r\n        {[...Array(4)].map((_, i) => (\r\n          <Skeleton key={i} className=\"aspect-square w-full rounded-md\" />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { useState } from \"react\";\r\nimport { Image } from \"@/types/product\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\r\nimport { ZoomIn } from \"lucide-react\";\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\nimport { ProductImageSkeleton } from \"./ProductImageSkeleton\";\r\n\r\ninterface ProductImagesProps {\r\n  images: Image[];\r\n  productName: string;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const ProductImages = ({ images, productName, isLoading }: ProductImagesProps) => {\r\n  const [selectedImage, setSelectedImage] = useState(0);\r\n  const [isZoomed, setIsZoomed] = useState(false);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const isMobile = useIsMobile();\r\n\r\n  if (isLoading) {\r\n    return <ProductImageSkeleton />;\r\n  }\r\n\r\n  const handleImageZoom = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if (!isZoomed || isMobile) return;\r\n    const image = e.currentTarget;\r\n    const { left, top, width, height } = image.getBoundingClientRect();\r\n    const x = ((e.clientX - left) / width) * 100;\r\n    const y = ((e.clientY - top) / height) * 100;\r\n    image.style.transformOrigin = `${x}% ${y}%`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {isMobile ? (\r\n        // Mobile layout\r\n        <div className=\"space-y-4\">\r\n          <div className=\"relative aspect-square w-full\">\r\n            <img\r\n              src={images[selectedImage]?.url || '/placeholder.svg'}\r\n              alt={productName}\r\n              className=\"w-full h-full object-cover rounded-lg\"\r\n              onClick={() => setIsModalOpen(true)}\r\n            />\r\n          </div>\r\n          <div className=\"flex gap-2 overflow-x-auto pb-2\">\r\n            {images.map((image, index) => (\r\n              <button\r\n                key={index}\r\n                onClick={() => setSelectedImage(index)}\r\n                className={cn(\r\n                  \"flex-shrink-0 w-20 aspect-square relative rounded-md border-2 transition-all\",\r\n                  selectedImage === index ? \"border-primary\" : \"border-transparent\"\r\n                )}\r\n              >\r\n                <img\r\n                  src={image.url}\r\n                  alt={`${productName} view ${index + 1}`}\r\n                  className=\"w-full h-full object-cover rounded-md\"\r\n                  loading=\"lazy\"\r\n                />\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        // Desktop layout\r\n        <div className=\"grid grid-cols-5 gap-4\">\r\n          <div className=\"space-y-2\">\r\n            {images.map((image, index) => (\r\n              <button\r\n                key={index}\r\n                onClick={() => setSelectedImage(index)}\r\n                className={cn(\r\n                  \"w-full aspect-square relative overflow-hidden rounded-md border-2 transition-all\",\r\n                  selectedImage === index ? \"border-primary\" : \"border-transparent\"\r\n                )}\r\n              >\r\n                <img\r\n                  src={image.url}\r\n                  alt={`${productName} view ${index + 1}`}\r\n                  className=\"w-full h-full object-cover hover:opacity-80 transition-opacity\"\r\n                  loading=\"lazy\"\r\n                />\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          <div\r\n            className={cn(\r\n              \"col-span-4 aspect-square relative overflow-hidden rounded-lg border border-gray-200 group\",\r\n              isZoomed ? \"cursor-zoom-out\" : \"cursor-zoom-in\"\r\n            )}\r\n            onMouseMove={handleImageZoom}\r\n            onMouseEnter={() => setIsZoomed(true)}\r\n            onMouseLeave={() => setIsZoomed(false)}\r\n            onClick={() => setIsModalOpen(true)}\r\n          >\r\n            <img\r\n              src={images[selectedImage]?.url || '/placeholder.svg'}\r\n              alt={productName}\r\n              className={cn(\r\n                \"w-full h-full object-contain transition-transform duration-200\",\r\n                isZoomed ? \"scale-150\" : \"scale-100\"\r\n              )}\r\n              loading=\"eager\"\r\n            />\r\n            <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n              <div className=\"bg-white p-2 rounded-full shadow-md\">\r\n                <ZoomIn className=\"w-5 h-5 text-gray-600\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <Dialog open={isModalOpen} onOpenChange={setIsModalOpen}>\r\n        <DialogContent className=\"max-w-4xl p-0 bg-black/90\">\r\n          <img\r\n            src={images[selectedImage]?.url || '/placeholder.svg'}\r\n            alt={productName}\r\n            className=\"w-full h-full object-contain\"\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};","interface CurrencyInfo {\r\n  code: string;\r\n  symbol: string;\r\n  rate: number;\r\n}\r\n\r\nexport const CURRENCIES: { [key: string]: CurrencyInfo } = {\r\n  'KE': { code: 'KES', symbol: 'KSh', rate: 130.5 },\r\n  'NG': { code: 'NGN', symbol: '₦', rate: 460.0 },\r\n  'GH': { code: 'GHS', symbol: 'GH₵', rate: 12.5 },\r\n  'TZ': { code: 'TZS', symbol: 'TSh', rate: 2500.0 },\r\n  'US': { code: 'USD', symbol: '$', rate: 1 },\r\n};\r\n\r\nexport const formatPrice = (price: number, countryCode: string = 'US') => {\r\n  const currency = CURRENCIES[countryCode] || CURRENCIES['US'];\r\n  const convertedPrice = price * currency.rate;\r\n  \r\n  // Format number with commas and 2 decimal places\r\n  const formattedNumber = new Intl.NumberFormat('en-US', {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  }).format(convertedPrice);\r\n  \r\n  return `${currency.symbol} ${formattedNumber}`;\r\n};\r\n\r\nexport const getCountryName = (code: string): string => {\r\n  const countries: { [key: string]: string } = {\r\n    'KE': 'Kenya',\r\n    'NG': 'Nigeria',\r\n    'GH': 'Ghana',\r\n    'TZ': 'Tanzania',\r\n    'US': 'United States',\r\n  };\r\n  return countries[code] || code;\r\n};","import { Minus, Plus } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface QuantitySelectorProps {\r\n  quantity: number;\r\n  setQuantity: (quantity: number) => void;\r\n  max: number;\r\n}\r\n\r\nexport const QuantitySelector = ({ quantity, setQuantity, max }: QuantitySelectorProps) => {\r\n  return (\r\n    <div className=\"flex items-center border rounded-md\">\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\r\n          \"h-9 w-9\",\r\n          quantity <= 1 && \"opacity-50 cursor-not-allowed\"\r\n        )}\r\n        onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n        disabled={quantity <= 1}\r\n      >\r\n        <Minus className=\"w-4 h-4\" />\r\n      </Button>\r\n      <span className=\"px-4 py-2 min-w-[3rem] text-center\">{quantity}</span>\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        className={cn(\r\n          \"h-9 w-9\",\r\n          quantity >= max && \"opacity-50 cursor-not-allowed\"\r\n        )}\r\n        onClick={() => setQuantity(Math.min(max, quantity + 1))}\r\n        disabled={quantity >= max}\r\n      >\r\n        <Plus className=\"w-4 h-4\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n};","import { useState } from \"react\";\r\nimport { Heart, Share2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { useCart } from \"@/contexts/CartContext\";\r\nimport { toast } from \"sonner\";\r\nimport { Product } from \"@/types/product\";\r\nimport { useCurrency } from \"@/hooks/useCurrency\";\r\nimport { getCountryName } from \"@/utils/currency\";\r\nimport { QuantitySelector } from \"./QuantitySelector\";\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface ProductInfoProps {\r\n  product: Product;\r\n}\r\n\r\nexport const ProductInfo = ({ product }: ProductInfoProps) => {\r\n  const [quantity, setQuantity] = useState(1);\r\n  const { addToCart } = useCart();\r\n  const { formatPrice } = useCurrency();\r\n  const isMobile = useIsMobile();\r\n  \r\n  const handleAddToCart = () => {\r\n    addToCart(product, quantity);\r\n    toast.success(`Added ${quantity} ${quantity === 1 ? 'item' : 'items'} to cart - ${formatPrice(product.price * quantity)}`);\r\n  };\r\n\r\n  const handleShare = async () => {\r\n    try {\r\n      await navigator.share({\r\n        title: product.name,\r\n        text: product.description,\r\n        url: window.location.href,\r\n      });\r\n    } catch (err) {\r\n      toast.error(\"Sharing failed. Try copying the URL manually.\");\r\n    }\r\n  };\r\n\r\n  const handleWishlist = () => {\r\n    toast.success(\"Added to wishlist!\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900\">{product.name}</h1>\r\n      \r\n      <div className=\"flex flex-col space-y-2\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <span className=\"text-xl md:text-2xl font-bold text-primary\">\r\n            {formatPrice(product.price)}\r\n          </span>\r\n          {quantity > 1 && (\r\n            <span className=\"text-sm text-gray-500\">\r\n              Total: {formatPrice(product.price * quantity)}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <span className=\"text-sm text-gray-500 flex items-center gap-2\">\r\n          Product from {getCountryName(product.origin_country)}\r\n        </span>\r\n      </div>\r\n\r\n      <p className=\"text-sm md:text-base text-gray-600\">{product.description}</p>\r\n\r\n      <div className={cn(\r\n        \"flex items-center gap-4\",\r\n        isMobile ? \"flex-col w-full\" : \"flex-row\"\r\n      )}>\r\n        <QuantitySelector \r\n          quantity={quantity} \r\n          setQuantity={setQuantity} \r\n          max={product.stock} \r\n        />\r\n        <Button \r\n          onClick={handleAddToCart} \r\n          className={cn(\r\n            \"bg-primary hover:bg-primary/90\",\r\n            isMobile && \"w-full\"\r\n          )}\r\n        >\r\n          Add to Cart\r\n        </Button>\r\n        <div className={cn(\r\n          \"flex gap-2\",\r\n          isMobile && \"w-full\"\r\n        )}>\r\n          <Button \r\n            variant=\"outline\" \r\n            onClick={handleWishlist}\r\n            className={isMobile && \"flex-1\"}\r\n          >\r\n            <Heart className=\"h-5 w-5\" />\r\n          </Button>\r\n          <Button \r\n            variant=\"outline\" \r\n            onClick={handleShare}\r\n            className={isMobile && \"flex-1\"}\r\n          >\r\n            <Share2 className=\"h-5 w-5\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"border-t pt-6\">\r\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n          <div>\r\n            <span className=\"text-gray-500\">Category:</span>\r\n            <span className=\"ml-2 text-gray-900\">{product.category}</span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-gray-500\">Stock:</span>\r\n            <span className=\"ml-2 text-gray-900\">{product.stock} available</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { Product } from \"@/types/product\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useCurrency } from \"@/hooks/useCurrency\";\r\nimport { useIsMobile } from \"@/hooks/use-mobile\";\r\n\r\ninterface SimilarProductsProps {\r\n  products: Product[];\r\n  currentProductId: string;\r\n}\r\n\r\nexport const SimilarProducts = ({ products, currentProductId }: SimilarProductsProps) => {\r\n  const { formatPrice } = useCurrency();\r\n  const isMobile = useIsMobile();\r\n  const similarProducts = products\r\n    .filter((p) => p.id !== currentProductId)\r\n    .slice(0, isMobile ? 2 : 4);\r\n\r\n  return (\r\n    <div className=\"mt-8 md:mt-16\">\r\n      <h2 className=\"text-xl md:text-2xl font-bold mb-4 md:mb-6\">Similar Products</h2>\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\">\r\n        {similarProducts.map((product) => (\r\n          <Link\r\n            key={product.id}\r\n            to={`/product/${product.id}`}\r\n            className=\"group cursor-pointer\"\r\n          >\r\n            <div className=\"aspect-square mb-2 overflow-hidden rounded-lg\">\r\n              <img\r\n                src={product.image_url || '/placeholder.svg'}\r\n                alt={product.name}\r\n                className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                loading=\"lazy\"\r\n              />\r\n            </div>\r\n            <h3 className=\"text-sm font-medium text-gray-900 group-hover:text-primary transition-colors line-clamp-2\">\r\n              {product.name}\r\n            </h3>\r\n            <p className=\"text-sm font-bold text-primary mt-1\">\r\n              {formatPrice(product.price)}\r\n            </p>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Star } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\ninterface ReviewFormProps {\r\n  productId: string;\r\n  onSuccess?: () => void;\r\n  onCancel?: () => void;\r\n}\r\n\r\nexport const ReviewForm = ({ productId, onSuccess, onCancel }: ReviewFormProps) => {\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (rating === 0) {\r\n      toast.error(\"Please select a rating\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      if (!user) {\r\n        toast.error(\"Please login to submit a review\");\r\n        return;\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('reviews')\r\n        .insert([\r\n          {\r\n            product_id: productId,\r\n            user_id: user.id,\r\n            rating,\r\n            comment\r\n          }\r\n        ]);\r\n\r\n      if (error) throw error;\r\n\r\n      toast.success(\"Review submitted successfully!\");\r\n      onSuccess?.();\r\n      setRating(0);\r\n      setComment(\"\");\r\n    } catch (error) {\r\n      console.error('Error submitting review:', error);\r\n      toast.error(\"Failed to submit review. Please try again.\");\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      <div className=\"flex items-center gap-1\">\r\n        {[1, 2, 3, 4, 5].map((value) => (\r\n          <button\r\n            key={value}\r\n            type=\"button\"\r\n            onClick={() => setRating(value)}\r\n            className=\"focus:outline-none\"\r\n          >\r\n            <Star\r\n              className={`w-6 h-6 ${\r\n                value <= rating\r\n                  ? \"fill-yellow-400 text-yellow-400\"\r\n                  : \"text-gray-300\"\r\n              }`}\r\n            />\r\n          </button>\r\n        ))}\r\n      </div>\r\n      \r\n      <Textarea\r\n        value={comment}\r\n        onChange={(e) => setComment(e.target.value)}\r\n        placeholder=\"Write your review here...\"\r\n        className=\"min-h-[100px]\"\r\n      />\r\n      \r\n      <div className=\"flex justify-end gap-2\">\r\n        {onCancel && (\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={onCancel}\r\n            disabled={isSubmitting}\r\n          >\r\n            Cancel\r\n          </Button>\r\n        )}\r\n        <Button type=\"submit\" disabled={isSubmitting}>\r\n          {isSubmitting ? \"Submitting...\" : \"Submit Review\"}\r\n        </Button>\r\n      </div>\r\n    </form>\r\n  );\r\n};","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name compareAsc\n * @category Common Helpers\n * @summary Compare the two dates and return -1, 0 or 1.\n *\n * @description\n * Compare the two dates and return 1 if the first date is after the second,\n * -1 if the first date is before the second or 0 if dates are equal.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The first date to compare\n * @param dateRight - The second date to compare\n *\n * @returns The result of the comparison\n *\n * @example\n * // Compare 11 February 1987 and 10 July 1989:\n * const result = compareAsc(new Date(1987, 1, 11), new Date(1989, 6, 10))\n * //=> -1\n *\n * @example\n * // Sort the array of dates:\n * const result = [\n *   new Date(1995, 6, 2),\n *   new Date(1987, 1, 11),\n *   new Date(1989, 6, 10)\n * ].sort(compareAsc)\n * //=> [\n * //   Wed Feb 11 1987 00:00:00,\n * //   Mon Jul 10 1989 00:00:00,\n * //   Sun Jul 02 1995 00:00:00\n * // ]\n */\nexport function compareAsc(dateLeft, dateRight) {\n  const _dateLeft = toDate(dateLeft);\n  const _dateRight = toDate(dateRight);\n\n  const diff = _dateLeft.getTime() - _dateRight.getTime();\n\n  if (diff < 0) {\n    return -1;\n  } else if (diff > 0) {\n    return 1;\n    // Return 0 if diff is 0; return NaN if diff is NaN\n  } else {\n    return diff;\n  }\n}\n\n// Fallback for modularized imports:\nexport default compareAsc;\n","import { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name constructNow\n * @category Generic Helpers\n * @summary Constructs a new current date using the passed value constructor.\n * @pure false\n *\n * @description\n * The function constructs a new current date using the constructor from\n * the reference date. It helps to build generic functions that accept date\n * extensions and use the current date.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n *\n * @returns Current date initialized using the given date constructor\n *\n * @example\n * import { constructNow, isSameDay } from 'date-fns'\n *\n * function isToday<DateType extends Date>(\n *   date: DateType | number | string,\n * ): boolean {\n *   // If we were to use `new Date()` directly, the function would  behave\n *   // differently in different timezones and return false for the same date.\n *   return isSameDay(date, constructNow(date));\n * }\n */\nexport function constructNow(date) {\n  return constructFrom(date, Date.now());\n}\n\n// Fallback for modularized imports:\nexport default constructNow;\n","export function getRoundingMethod(method) {\n  return (number) => {\n    const round = method ? Math[method] : Math.trunc;\n    const result = round(number);\n    // Prevent negative zero\n    return result === 0 ? 0 : result;\n  };\n}\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name differenceInMilliseconds\n * @category Millisecond Helpers\n * @summary Get the number of milliseconds between the given dates.\n *\n * @description\n * Get the number of milliseconds between the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of milliseconds\n *\n * @example\n * // How many milliseconds are between\n * // 2 July 2014 12:30:20.600 and 2 July 2014 12:30:21.700?\n * const result = differenceInMilliseconds(\n *   new Date(2014, 6, 2, 12, 30, 21, 700),\n *   new Date(2014, 6, 2, 12, 30, 20, 600)\n * )\n * //=> 1100\n */\nexport function differenceInMilliseconds(dateLeft, dateRight) {\n  return +toDate(dateLeft) - +toDate(dateRight);\n}\n\n// Fallback for modularized imports:\nexport default differenceInMilliseconds;\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name endOfDay\n * @category Day Helpers\n * @summary Return the end of a day for the given date.\n *\n * @description\n * Return the end of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The end of a day\n *\n * @example\n * // The end of a day for 2 September 2014 11:55:00:\n * const result = endOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 23:59:59.999\n */\nexport function endOfDay(date) {\n  const _date = toDate(date);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfDay;\n","import { endOfDay } from \"./endOfDay.mjs\";\nimport { endOfMonth } from \"./endOfMonth.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name isLastDayOfMonth\n * @category Month Helpers\n * @summary Is the given date the last day of a month?\n *\n * @description\n * Is the given date the last day of a month?\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to check\n\n * @returns The date is the last day of a month\n *\n * @example\n * // Is 28 February 2014 the last day of a month?\n * const result = isLastDayOfMonth(new Date(2014, 1, 28))\n * //=> true\n */\nexport function isLastDayOfMonth(date) {\n  const _date = toDate(date);\n  return +endOfDay(_date) === +endOfMonth(_date);\n}\n\n// Fallback for modularized imports:\nexport default isLastDayOfMonth;\n","import { compareAsc } from \"./compareAsc.mjs\";\nimport { differenceInCalendarMonths } from \"./differenceInCalendarMonths.mjs\";\nimport { isLastDayOfMonth } from \"./isLastDayOfMonth.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name differenceInMonths\n * @category Month Helpers\n * @summary Get the number of full months between the given dates.\n *\n * @description\n * Get the number of full months between the given dates using trunc as a default rounding method.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of full months\n *\n * @example\n * // How many full months are between 31 January 2014 and 1 September 2014?\n * const result = differenceInMonths(new Date(2014, 8, 1), new Date(2014, 0, 31))\n * //=> 7\n */\nexport function differenceInMonths(dateLeft, dateRight) {\n  const _dateLeft = toDate(dateLeft);\n  const _dateRight = toDate(dateRight);\n\n  const sign = compareAsc(_dateLeft, _dateRight);\n  const difference = Math.abs(\n    differenceInCalendarMonths(_dateLeft, _dateRight),\n  );\n  let result;\n\n  // Check for the difference of less than month\n  if (difference < 1) {\n    result = 0;\n  } else {\n    if (_dateLeft.getMonth() === 1 && _dateLeft.getDate() > 27) {\n      // This will check if the date is end of Feb and assign a higher end of month date\n      // to compare it with Jan\n      _dateLeft.setDate(30);\n    }\n\n    _dateLeft.setMonth(_dateLeft.getMonth() - sign * difference);\n\n    // Math.abs(diff in full months - diff in calendar months) === 1 if last calendar month is not full\n    // If so, result must be decreased by 1 in absolute value\n    let isLastMonthNotFull = compareAsc(_dateLeft, _dateRight) === -sign;\n\n    // Check for cases of one full calendar month\n    if (\n      isLastDayOfMonth(toDate(dateLeft)) &&\n      difference === 1 &&\n      compareAsc(dateLeft, _dateRight) === 1\n    ) {\n      isLastMonthNotFull = false;\n    }\n\n    result = sign * (difference - Number(isLastMonthNotFull));\n  }\n\n  // Prevent negative zero\n  return result === 0 ? 0 : result;\n}\n\n// Fallback for modularized imports:\nexport default differenceInMonths;\n","import { getRoundingMethod } from \"./_lib/getRoundingMethod.mjs\";\nimport { differenceInMilliseconds } from \"./differenceInMilliseconds.mjs\";\n\n/**\n * The {@link differenceInSeconds} function options.\n */\n\n/**\n * @name differenceInSeconds\n * @category Second Helpers\n * @summary Get the number of seconds between the given dates.\n *\n * @description\n * Get the number of seconds between the given dates.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n * @param options - An object with options.\n *\n * @returns The number of seconds\n *\n * @example\n * // How many seconds are between\n * // 2 July 2014 12:30:07.999 and 2 July 2014 12:30:20.000?\n * const result = differenceInSeconds(\n *   new Date(2014, 6, 2, 12, 30, 20, 0),\n *   new Date(2014, 6, 2, 12, 30, 7, 999)\n * )\n * //=> 12\n */\nexport function differenceInSeconds(dateLeft, dateRight, options) {\n  const diff = differenceInMilliseconds(dateLeft, dateRight) / 1000;\n  return getRoundingMethod(options?.roundingMethod)(diff);\n}\n\n// Fallback for modularized imports:\nexport default differenceInSeconds;\n","import { compareAsc } from \"./compareAsc.mjs\";\nimport { minutesInDay, minutesInMonth } from \"./constants.mjs\";\nimport { differenceInMonths } from \"./differenceInMonths.mjs\";\nimport { differenceInSeconds } from \"./differenceInSeconds.mjs\";\nimport { toDate } from \"./toDate.mjs\";\nimport { defaultLocale } from \"./_lib/defaultLocale.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\nimport { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.mjs\";\n\n/**\n * The {@link formatDistance} function options.\n */\n\n/**\n * @name formatDistance\n * @category Common Helpers\n * @summary Return the distance between the given dates in words.\n *\n * @description\n * Return the distance between the given dates in words.\n *\n * | Distance between dates                                            | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance between dates | Result               |\n * |------------------------|----------------------|\n * | 0 secs ... 5 secs      | less than 5 seconds  |\n * | 5 secs ... 10 secs     | less than 10 seconds |\n * | 10 secs ... 20 secs    | less than 20 seconds |\n * | 20 secs ... 40 secs    | half a minute        |\n * | 40 secs ... 60 secs    | less than a minute   |\n * | 60 secs ... 90 secs    | 1 minute             |\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date\n * @param baseDate - The date to compare with\n * @param options - An object with options\n *\n * @returns The distance in words\n *\n * @throws `date` must not be Invalid Date\n * @throws `baseDate` must not be Invalid Date\n * @throws `options.locale` must contain `formatDistance` property\n *\n * @example\n * // What is the distance between 2 July 2014 and 1 January 2015?\n * const result = formatDistance(new Date(2014, 6, 2), new Date(2015, 0, 1))\n * //=> '6 months'\n *\n * @example\n * // What is the distance between 1 January 2015 00:00:15\n * // and 1 January 2015 00:00:00, including seconds?\n * const result = formatDistance(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   new Date(2015, 0, 1, 0, 0, 0),\n *   { includeSeconds: true }\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // What is the distance from 1 January 2016\n * // to 1 January 2015, with a suffix?\n * const result = formatDistance(new Date(2015, 0, 1), new Date(2016, 0, 1), {\n *   addSuffix: true\n * })\n * //=> 'about 1 year ago'\n *\n * @example\n * // What is the distance between 1 August 2016 and 1 January 2015 in Esperanto?\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = formatDistance(new Date(2016, 7, 1), new Date(2015, 0, 1), {\n *   locale: eoLocale\n * })\n * //=> 'pli ol 1 jaro'\n */\n\nexport function formatDistance(date, baseDate, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n  const minutesInAlmostTwoDays = 2520;\n\n  const comparison = compareAsc(date, baseDate);\n\n  if (isNaN(comparison)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  const localizeOptions = Object.assign({}, options, {\n    addSuffix: options?.addSuffix,\n    comparison: comparison,\n  });\n\n  let dateLeft;\n  let dateRight;\n  if (comparison > 0) {\n    dateLeft = toDate(baseDate);\n    dateRight = toDate(date);\n  } else {\n    dateLeft = toDate(date);\n    dateRight = toDate(baseDate);\n  }\n\n  const seconds = differenceInSeconds(dateRight, dateLeft);\n  const offsetInSeconds =\n    (getTimezoneOffsetInMilliseconds(dateRight) -\n      getTimezoneOffsetInMilliseconds(dateLeft)) /\n    1000;\n  const minutes = Math.round((seconds - offsetInSeconds) / 60);\n  let months;\n\n  // 0 up to 2 mins\n  if (minutes < 2) {\n    if (options?.includeSeconds) {\n      if (seconds < 5) {\n        return locale.formatDistance(\"lessThanXSeconds\", 5, localizeOptions);\n      } else if (seconds < 10) {\n        return locale.formatDistance(\"lessThanXSeconds\", 10, localizeOptions);\n      } else if (seconds < 20) {\n        return locale.formatDistance(\"lessThanXSeconds\", 20, localizeOptions);\n      } else if (seconds < 40) {\n        return locale.formatDistance(\"halfAMinute\", 0, localizeOptions);\n      } else if (seconds < 60) {\n        return locale.formatDistance(\"lessThanXMinutes\", 1, localizeOptions);\n      } else {\n        return locale.formatDistance(\"xMinutes\", 1, localizeOptions);\n      }\n    } else {\n      if (minutes === 0) {\n        return locale.formatDistance(\"lessThanXMinutes\", 1, localizeOptions);\n      } else {\n        return locale.formatDistance(\"xMinutes\", minutes, localizeOptions);\n      }\n    }\n\n    // 2 mins up to 0.75 hrs\n  } else if (minutes < 45) {\n    return locale.formatDistance(\"xMinutes\", minutes, localizeOptions);\n\n    // 0.75 hrs up to 1.5 hrs\n  } else if (minutes < 90) {\n    return locale.formatDistance(\"aboutXHours\", 1, localizeOptions);\n\n    // 1.5 hrs up to 24 hrs\n  } else if (minutes < minutesInDay) {\n    const hours = Math.round(minutes / 60);\n    return locale.formatDistance(\"aboutXHours\", hours, localizeOptions);\n\n    // 1 day up to 1.75 days\n  } else if (minutes < minutesInAlmostTwoDays) {\n    return locale.formatDistance(\"xDays\", 1, localizeOptions);\n\n    // 1.75 days up to 30 days\n  } else if (minutes < minutesInMonth) {\n    const days = Math.round(minutes / minutesInDay);\n    return locale.formatDistance(\"xDays\", days, localizeOptions);\n\n    // 1 month up to 2 months\n  } else if (minutes < minutesInMonth * 2) {\n    months = Math.round(minutes / minutesInMonth);\n    return locale.formatDistance(\"aboutXMonths\", months, localizeOptions);\n  }\n\n  months = differenceInMonths(dateRight, dateLeft);\n\n  // 2 months up to 12 months\n  if (months < 12) {\n    const nearestMonth = Math.round(minutes / minutesInMonth);\n    return locale.formatDistance(\"xMonths\", nearestMonth, localizeOptions);\n\n    // 1 year up to max Date\n  } else {\n    const monthsSinceStartOfYear = months % 12;\n    const years = Math.trunc(months / 12);\n\n    // N years up to 1 years 3 months\n    if (monthsSinceStartOfYear < 3) {\n      return locale.formatDistance(\"aboutXYears\", years, localizeOptions);\n\n      // N years 3 months up to N years 9 months\n    } else if (monthsSinceStartOfYear < 9) {\n      return locale.formatDistance(\"overXYears\", years, localizeOptions);\n\n      // N years 9 months up to N year 12 months\n    } else {\n      return locale.formatDistance(\"almostXYears\", years + 1, localizeOptions);\n    }\n  }\n}\n\n// Fallback for modularized imports:\nexport default formatDistance;\n","import { constructNow } from \"./constructNow.mjs\";\nimport { formatDistance } from \"./formatDistance.mjs\";\n\n/**\n * The {@link formatDistanceToNow} function options.\n */\n\n/**\n * @name formatDistanceToNow\n * @category Common Helpers\n * @summary Return the distance between the given date and now in words.\n * @pure false\n *\n * @description\n * Return the distance between the given date and now in words.\n *\n * | Distance to now                                                   | Result              |\n * |-------------------------------------------------------------------|---------------------|\n * | 0 ... 30 secs                                                     | less than a minute  |\n * | 30 secs ... 1 min 30 secs                                         | 1 minute            |\n * | 1 min 30 secs ... 44 mins 30 secs                                 | [2..44] minutes     |\n * | 44 mins ... 30 secs ... 89 mins 30 secs                           | about 1 hour        |\n * | 89 mins 30 secs ... 23 hrs 59 mins 30 secs                        | about [2..24] hours |\n * | 23 hrs 59 mins 30 secs ... 41 hrs 59 mins 30 secs                 | 1 day               |\n * | 41 hrs 59 mins 30 secs ... 29 days 23 hrs 59 mins 30 secs         | [2..30] days        |\n * | 29 days 23 hrs 59 mins 30 secs ... 44 days 23 hrs 59 mins 30 secs | about 1 month       |\n * | 44 days 23 hrs 59 mins 30 secs ... 59 days 23 hrs 59 mins 30 secs | about 2 months      |\n * | 59 days 23 hrs 59 mins 30 secs ... 1 yr                           | [2..12] months      |\n * | 1 yr ... 1 yr 3 months                                            | about 1 year        |\n * | 1 yr 3 months ... 1 yr 9 month s                                  | over 1 year         |\n * | 1 yr 9 months ... 2 yrs                                           | almost 2 years      |\n * | N yrs ... N yrs 3 months                                          | about N years       |\n * | N yrs 3 months ... N yrs 9 months                                 | over N years        |\n * | N yrs 9 months ... N+1 yrs                                        | almost N+1 years    |\n *\n * With `options.includeSeconds == true`:\n * | Distance to now     | Result               |\n * |---------------------|----------------------|\n * | 0 secs ... 5 secs   | less than 5 seconds  |\n * | 5 secs ... 10 secs  | less than 10 seconds |\n * | 10 secs ... 20 secs | less than 20 seconds |\n * | 20 secs ... 40 secs | half a minute        |\n * | 40 secs ... 60 secs | less than a minute   |\n * | 60 secs ... 90 secs | 1 minute             |\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n * @param options - The object with options\n *\n * @returns The distance in words\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `formatDistance` property\n *\n * @example\n * // If today is 1 January 2015, what is the distance to 2 July 2014?\n * const result = formatDistanceToNow(\n *   new Date(2014, 6, 2)\n * )\n * //=> '6 months'\n *\n * @example\n * // If now is 1 January 2015 00:00:00,\n * // what is the distance to 1 January 2015 00:00:15, including seconds?\n * const result = formatDistanceToNow(\n *   new Date(2015, 0, 1, 0, 0, 15),\n *   {includeSeconds: true}\n * )\n * //=> 'less than 20 seconds'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 January 2016, with a suffix?\n * const result = formatDistanceToNow(\n *   new Date(2016, 0, 1),\n *   {addSuffix: true}\n * )\n * //=> 'in about 1 year'\n *\n * @example\n * // If today is 1 January 2015,\n * // what is the distance to 1 August 2016 in Esperanto?\n * const eoLocale = require('date-fns/locale/eo')\n * const result = formatDistanceToNow(\n *   new Date(2016, 7, 1),\n *   {locale: eoLocale}\n * )\n * //=> 'pli ol 1 jaro'\n */\nexport function formatDistanceToNow(date, options) {\n  return formatDistance(date, constructNow(date), options);\n}\n\n// Fallback for modularized imports:\nexport default formatDistanceToNow;\n","import { useQuery } from \"@tanstack/react-query\";\r\nimport { Star, User } from \"lucide-react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface ReviewListProps {\r\n  productId: string;\r\n}\r\n\r\ninterface Review {\r\n  id: string;\r\n  rating: number;\r\n  comment: string;\r\n  created_at: string;\r\n  profiles: {\r\n    username: string;\r\n    full_name: string;\r\n    avatar_url: string;\r\n  };\r\n}\r\n\r\nexport const ReviewList = ({ productId }: ReviewListProps) => {\r\n  const { data: reviews, isLoading } = useQuery({\r\n    queryKey: [\"reviews\", productId],\r\n    queryFn: async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"reviews\")\r\n        .select(`\r\n          *,\r\n          profiles (\r\n            username,\r\n            full_name,\r\n            avatar_url\r\n          )\r\n        `)\r\n        .eq(\"product_id\", productId)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return data as Review[];\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return <div className=\"animate-pulse space-y-4\">\r\n      {[1, 2, 3].map((i) => (\r\n        <div key={i} className=\"bg-gray-100 p-4 rounded-lg\">\r\n          <div className=\"h-4 bg-gray-200 rounded w-1/4 mb-2\"></div>\r\n          <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\r\n        </div>\r\n      ))}\r\n    </div>;\r\n  }\r\n\r\n  if (!reviews?.length) {\r\n    return (\r\n      <div className=\"text-center py-8 text-gray-500\">\r\n        No reviews yet. Be the first to review this product!\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {reviews.map((review) => (\r\n        <div key={review.id} className=\"border-b pb-6 last:border-0\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <div className=\"flex items-center gap-2\">\r\n              {review.profiles.avatar_url ? (\r\n                <img\r\n                  src={review.profiles.avatar_url}\r\n                  alt={review.profiles.username || \"User\"}\r\n                  className=\"w-8 h-8 rounded-full\"\r\n                />\r\n              ) : (\r\n                <div className=\"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                  <User className=\"w-4 h-4 text-gray-500\" />\r\n                </div>\r\n              )}\r\n              <div>\r\n                <p className=\"font-medium\">\r\n                  {review.profiles.full_name || review.profiles.username || \"Anonymous\"}\r\n                </p>\r\n                <div className=\"flex items-center gap-1\">\r\n                  {[1, 2, 3, 4, 5].map((star) => (\r\n                    <Star\r\n                      key={star}\r\n                      className={`w-4 h-4 ${\r\n                        star <= review.rating\r\n                          ? \"fill-yellow-400 text-yellow-400\"\r\n                          : \"text-gray-300\"\r\n                      }`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <span className=\"text-sm text-gray-500\">\r\n              {formatDistanceToNow(new Date(review.created_at), { addSuffix: true })}\r\n            </span>\r\n          </div>\r\n          {review.comment && (\r\n            <p className=\"text-gray-600 mt-2\">{review.comment}</p>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};","import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { ReviewForm } from \"./ReviewForm\";\r\nimport { ReviewList } from \"./ReviewList\";\r\nimport { useAuth } from \"@/components/AuthProvider\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface ProductReviewsProps {\r\n  productId: string;\r\n}\r\n\r\nexport const ProductReviews = ({ productId }: ProductReviewsProps) => {\r\n  const [showReviewForm, setShowReviewForm] = useState(false);\r\n  const { user } = useAuth();\r\n\r\n  const handleAddReview = () => {\r\n    if (!user) {\r\n      toast.error(\"Please login to write a review\");\r\n      return;\r\n    }\r\n    setShowReviewForm(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-xl font-semibold\">Customer Reviews</h3>\r\n        {!showReviewForm && (\r\n          <Button onClick={handleAddReview}>\r\n            Write a Review\r\n          </Button>\r\n        )}\r\n      </div>\r\n\r\n      {showReviewForm && (\r\n        <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n          <ReviewForm\r\n            productId={productId}\r\n            onSuccess={() => setShowReviewForm(false)}\r\n            onCancel={() => setShowReviewForm(false)}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <ReviewList productId={productId} />\r\n    </div>\r\n  );\r\n};","import { useParams } from \"react-router-dom\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\nimport {\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from \"@/components/ui/tabs\";\r\nimport {\r\n  Accordion,\r\n  AccordionContent,\r\n  AccordionItem,\r\n  AccordionTrigger,\r\n} from \"@/components/ui/accordion\";\r\nimport { ProductImages } from \"@/components/product-details/ProductImages\";\r\nimport { ProductInfo } from \"@/components/product-details/ProductInfo\";\r\nimport { SimilarProducts } from \"@/components/product-details/SimilarProducts\";\r\nimport { ProductReviews } from \"@/components/reviews/ProductReviews\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Product } from \"@/types/product\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst ProductDetails = () => {\r\n  const { id } = useParams();\r\n  \r\n  const { data: product, isLoading } = useQuery({\r\n    queryKey: [\"product\", id],\r\n    queryFn: async () => {\r\n      console.log(\"Fetching product details for ID:\", id);\r\n      \r\n      if (!id) {\r\n        console.error(\"No product ID provided\");\r\n        throw new Error(\"No product ID provided\");\r\n      }\r\n\r\n      try {\r\n        const { data: products, error: productsError } = await supabase\r\n          .from(\"products\")\r\n          .select(`\r\n            *,\r\n            product_images (\r\n              id,\r\n              image_url,\r\n              is_primary,\r\n              display_order\r\n            )\r\n          `)\r\n          .eq('id', id)\r\n          .maybeSingle();\r\n\r\n        if (productsError) {\r\n          console.error(\"Error fetching products:\", productsError);\r\n          toast.error(\"Failed to load product details\");\r\n          throw productsError;\r\n        }\r\n\r\n        if (!products) {\r\n          console.error(\"Product not found\");\r\n          toast.error(\"Product not found\");\r\n          throw new Error(\"Product not found\");\r\n        }\r\n\r\n        console.log(\"Found product:\", products);\r\n        return products as Product;\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch product:\", err);\r\n        toast.error(\"Failed to load product details\");\r\n        throw err;\r\n      }\r\n    },\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"grid md:grid-cols-2 gap-8\">\r\n          <Skeleton className=\"aspect-square w-full\" />\r\n          <div className=\"space-y-4\">\r\n            <Skeleton className=\"h-8 w-3/4\" />\r\n            <Skeleton className=\"h-6 w-1/4\" />\r\n            <Skeleton className=\"h-24 w-full\" />\r\n            <Skeleton className=\"h-10 w-1/3\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-800\">Product not found</h2>\r\n          <p className=\"text-gray-600 mt-2\">\r\n            The product you're looking for doesn't exist or has been removed.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"grid md:grid-cols-2 gap-8\">\r\n        <ProductImages \r\n          images={product.product_images?.map(img => ({\r\n            url: img.image_url,\r\n            alt: product.name\r\n          })) || [\r\n            { url: product.image_url || '/placeholder.svg', alt: product.name }\r\n          ]} \r\n          productName={product.name} \r\n        />\r\n        <ProductInfo product={product} />\r\n      </div>\r\n\r\n      <Tabs defaultValue=\"details\" className=\"mt-12\">\r\n        <TabsList className=\"w-full\">\r\n          <TabsTrigger value=\"details\" className=\"flex-1\">Details</TabsTrigger>\r\n          <TabsTrigger value=\"shipping\" className=\"flex-1\">Shipping</TabsTrigger>\r\n          <TabsTrigger value=\"reviews\" className=\"flex-1\">Reviews</TabsTrigger>\r\n        </TabsList>\r\n        <TabsContent value=\"details\" className=\"mt-4\">\r\n          <Accordion type=\"single\" collapsible>\r\n            <AccordionItem value=\"description\">\r\n              <AccordionTrigger>Product Description</AccordionTrigger>\r\n              <AccordionContent>\r\n                {product.description || \"Detailed product description will be available soon.\"}\r\n              </AccordionContent>\r\n            </AccordionItem>\r\n            <AccordionItem value=\"specifications\">\r\n              <AccordionTrigger>Specifications</AccordionTrigger>\r\n              <AccordionContent>\r\n                <ul className=\"list-disc pl-4 space-y-2\">\r\n                  <li>Material: Premium quality materials</li>\r\n                  <li>Dimensions: Custom sizes available</li>\r\n                  <li>Origin: {product.origin_country || \"Made in Africa\"}</li>\r\n                  <li>Category: {product.category}</li>\r\n                </ul>\r\n              </AccordionContent>\r\n            </AccordionItem>\r\n          </Accordion>\r\n        </TabsContent>\r\n        <TabsContent value=\"shipping\" className=\"mt-4\">\r\n          <div className=\"prose max-w-none\">\r\n            <p>Free shipping on orders over $100</p>\r\n            <p>Estimated delivery: 5-7 business days</p>\r\n            <p>International shipping available to select countries</p>\r\n            <p>All items are carefully packaged to ensure safe delivery</p>\r\n          </div>\r\n        </TabsContent>\r\n        <TabsContent value=\"reviews\" className=\"mt-4\">\r\n          <ProductReviews productId={product.id} />\r\n        </TabsContent>\r\n      </Tabs>\r\n\r\n      <div className=\"mt-12\">\r\n        <SimilarProducts \r\n          products={[]} \r\n          currentProductId={product.id} \r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;"],"names":["Share2","createLucideIcon","ZoomIn","ProductImageSkeleton","jsxs","jsx","Skeleton","_","i","ProductImages","images","productName","isLoading","selectedImage","setSelectedImage","useState","isZoomed","setIsZoomed","isModalOpen","setIsModalOpen","isMobile","useIsMobile","handleImageZoom","e","image","left","top","width","height","x","y","_a","index","cn","_b","Dialog","DialogContent","_c","getCountryName","code","QuantitySelector","quantity","setQuantity","max","Button","Minus","Plus","ProductInfo","product","addToCart","useCart","formatPrice","useCurrency","handleAddToCart","toast","handleShare","handleWishlist","Heart","SimilarProducts","products","currentProductId","similarProducts","p","Link","ReviewForm","productId","onSuccess","onCancel","rating","setRating","comment","setComment","isSubmitting","setIsSubmitting","handleSubmit","user","supabase","error","value","Star","Textarea","compareAsc","dateLeft","dateRight","_dateLeft","toDate","_dateRight","diff","constructNow","date","constructFrom","getRoundingMethod","method","number","result","differenceInMilliseconds","endOfDay","_date","isLastDayOfMonth","endOfMonth","differenceInMonths","sign","difference","differenceInCalendarMonths","isLastMonthNotFull","differenceInSeconds","options","formatDistance","baseDate","defaultOptions","getDefaultOptions","locale","defaultLocale","minutesInAlmostTwoDays","comparison","localizeOptions","seconds","offsetInSeconds","getTimezoneOffsetInMilliseconds","minutes","months","minutesInDay","hours","minutesInMonth","days","nearestMonth","monthsSinceStartOfYear","years","formatDistanceToNow","ReviewList","reviews","useQuery","data","review","User","star","ProductReviews","showReviewForm","setShowReviewForm","useAuth","handleAddReview","ProductDetails","id","useParams","productsError","err","img","Tabs","TabsList","TabsTrigger","TabsContent","Accordion","AccordionItem","AccordionTrigger","AccordionContent"],"mappings":"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","x_google_ignoreList":[0,1,9,10,11,12,13,14,15,16,17,18]}