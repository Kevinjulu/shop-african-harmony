import{j as s}from"./ui-vendor-DUvlyADh.js";import{r as x,L as o}from"./react-vendor-BVHdP9Rw.js";import{c as k,l as C,g as I,o as _,s as h,J as l,B as c,i,m as E,D as S}from"./index-hIbkmTRc.js";import{T as W}from"./trash-2-DLKjyhPr.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=k("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),A=()=>{const[u,n]=x.useState([]),[j,g]=x.useState(!0),{addToCart:w}=C(),{formatPrice:N}=I(),{user:a}=_();x.useEffect(()=>{v()},[a]);const v=async()=>{if(!a){g(!1);return}try{const{data:e,error:r}=await h.from("wishlists").select("product_id").eq("user_id",a.id);if(r)throw r;if(e&&e.length>0){const d=e.map(t=>t.product_id),{data:m,error:p}=await h.from("products").select("*").in("id",d);if(p)throw p;const b=(m||[]).map(t=>({...t,status:t.status,images:t.image_url?[{url:t.image_url,alt:t.name}]:void 0}));n(b)}else n([])}catch(e){console.error("Error fetching wishlist:",e),l.error("Failed to load wishlist items")}finally{g(!1)}},f=async e=>{if(a)try{const{error:r}=await h.from("wishlists").delete().eq("user_id",a.id).eq("product_id",e);if(r)throw r;n(d=>d.filter(m=>m.id!==e)),l.success("Item removed from wishlist")}catch(r){console.error("Error removing from wishlist:",r),l.error("Failed to remove item from wishlist")}},y=e=>{w(e,1),f(e.id),l.success("Item moved to cart")};return a?j?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Wishlist"}),s.jsx("div",{className:"grid gap-6",children:[1,2,3].map(e=>s.jsxs("div",{className:"flex gap-4 border rounded-lg p-4",children:[s.jsx(i,{className:"w-24 h-24 rounded-md"}),s.jsxs("div",{className:"flex-grow",children:[s.jsx(i,{className:"h-6 w-3/4 mb-2"}),s.jsx(i,{className:"h-4 w-1/4 mb-4"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(i,{className:"h-10 w-32"}),s.jsx(i,{className:"h-10 w-10"})]})]})]},e))})]}):u.length===0?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(E,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),s.jsx("h2",{className:"text-2xl font-medium text-gray-600 mb-4",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Browse our products and add your favorites to the wishlist"}),s.jsx(o,{to:"/products",children:s.jsx(c,{className:"bg-orange-400 hover:bg-orange-500",children:"Browse Products"})})]})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Wishlist"}),s.jsx("div",{className:"grid gap-6",children:u.map(e=>s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 border rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsx(o,{to:`/product/${e.id}`,className:"sm:w-24",children:s.jsx("img",{src:e.image_url||"/placeholder.svg",alt:e.name,className:"w-full sm:w-24 h-24 object-cover rounded-md"})}),s.jsxs("div",{className:"flex-grow",children:[s.jsx(o,{to:`/product/${e.id}`,children:s.jsx("h3",{className:"font-medium text-lg hover:text-orange-400 transition-colors",children:e.name})}),s.jsx("p",{className:"text-orange-400 font-semibold mt-1",children:N(e.price)}),e.stock>0?s.jsx("p",{className:"text-green-600 text-sm mt-1",children:"In Stock"}):s.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Out of Stock"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsxs(c,{variant:"outline",size:"sm",onClick:()=>y(e),disabled:e.stock===0,className:"flex items-center gap-2 border-orange-400 text-orange-400 hover:bg-orange-50",children:[s.jsx(S,{className:"w-4 h-4"}),"Move to Cart"]}),s.jsx(c,{variant:"ghost",size:"sm",onClick:()=>f(e.id),className:"text-red-500 hover:text-red-600 hover:bg-red-50",children:s.jsx(W,{className:"w-4 h-4"})})]})]})]},e.id))})]}):s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(L,{className:"w-16 h-16 mx-auto text-orange-400 mb-4"}),s.jsx("h2",{className:"text-2xl font-medium text-gray-600 mb-4",children:"Please sign in to view your wishlist"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Create an account or sign in to save your favorite items"}),s.jsx(o,{to:"/auth",children:s.jsx(c,{className:"bg-orange-400 hover:bg-orange-500",children:"Sign In / Register"})})]})})};export{A as default};
//# sourceMappingURL=Wishlist-CtD3vVoR.js.map
